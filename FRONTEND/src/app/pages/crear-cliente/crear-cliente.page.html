<ion-content class="registro-bg">
  <div class="registro-wrapper">
    <div class="registro-card">
      <!-- üè∑Ô∏è T√≠tulo -->
      <h1 class="registro-title verde">
        CREAR CUENTA
      </h1>

      <!-- üì¢ Mensaje de error -->
      <div *ngIf="mensajeError" class="error-box">
        {{ mensajeError }}
      </div>

      <div class="form-row">
        <div class="input-group full-width">
          <label class="input-label">RUT</label>
          <ion-input class="registro-input input-white" [(ngModel)]="cliente.rut" placeholder="Ej: 12345678-9 (sin puntos)" fill="solid"
            (ionBlur)="marcarTouched('rut')" (ngModelChange)="onRutChange()"></ion-input>
          <div class="campo-error" *ngIf="(rutTouched || submitted) && rutError">{{ rutError }}</div>
        </div>
      </div>
      <div class="form-row">
        <div class="input-group full-width">
          <label class="input-label">Nombre</label>
          <ion-input class="registro-input input-white" [(ngModel)]="cliente.nombre" placeholder="Tu nombre" fill="solid"
            (ionBlur)="marcarTouched('nombre')" (ngModelChange)="marcarTouched('nombre')"></ion-input>
          <div class="campo-error" *ngIf="(nombreTouched || submitted) && nombreError">{{ nombreError }}</div>
        </div>
      </div>
      <div class="form-row">
        <div class="input-group full-width">
          <label class="input-label">Apellido</label>
          <ion-input class="registro-input input-white" [(ngModel)]="cliente.apellido" placeholder="Tu apellido" fill="solid"
            (ionBlur)="marcarTouched('apellido')" (ngModelChange)="marcarTouched('apellido')"></ion-input>
          <div class="campo-error" *ngIf="(apellidoTouched || submitted) && apellidoError">{{ apellidoError }}</div>
        </div>
      </div>
      <div class="form-row">
        <div class="input-group full-width">
          <label class="input-label">Correo electr√≥nico</label>
          <ion-input class="registro-input input-white" [(ngModel)]="cliente.email" type="email" placeholder="Correo electr√≥nico" fill="solid"
            (ionBlur)="marcarTouched('email')" (ngModelChange)="marcarTouched('email')"></ion-input>
          <div class="campo-error" *ngIf="(emailTouched || submitted) && emailError">{{ emailError }}</div>
        </div>
      </div>
      <div class="form-row">
        <div class="input-group full-width">
          <label class="input-label">Tel√©fono</label>
          <ion-input class="registro-input input-white" [(ngModel)]="cliente.telefono" type="tel" placeholder="+56 9 1234 5678" fill="solid"
            (ionBlur)="marcarTouched('telefono')" (ngModelChange)="marcarTouched('telefono')"></ion-input>
          <div class="campo-error" *ngIf="(telefonoTouched || submitted) && telefonoError">{{ telefonoError }}</div>
        </div>
      </div>
      <div class="form-row">
        <div class="input-group full-width input-group-password">
          <label class="input-label">Contrase√±a</label>
          <div class="input-password-wrapper">
            <ion-input class="registro-input input-white" [(ngModel)]="cliente.password" [type]="showPassword ? 'text' : 'password'" placeholder="Contrase√±a" fill="solid"
              (ionBlur)="marcarTouched('password')" (ngModelChange)="marcarTouched('password')"></ion-input>
            <button type="button" class="btn-ojo" (click)="togglePassword()" tabindex="-1">
              <svg *ngIf="!showPassword" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><ellipse cx="12" cy="12" rx="9" ry="5"/><circle cx="12" cy="12" r="2"/></svg>
              <svg *ngIf="showPassword" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><ellipse cx="12" cy="12" rx="9" ry="5"/><circle cx="12" cy="12" r="2"/><line x1="2" y1="2" x2="22" y2="22"/></svg>
            </button>
          </div>
          <div class="campo-error" *ngIf="(passwordTouched || submitted) && passwordError">{{ passwordError }}</div>
        </div>
      </div>
      <div class="form-row">
        <div class="input-group full-width input-group-password">
          <label class="input-label">Confirmar contrase√±a</label>
          <div class="input-password-wrapper">
            <ion-input class="registro-input input-white" [(ngModel)]="cliente.confirmarPassword" [type]="showConfirmPassword ? 'text' : 'password'" placeholder="Repite la contrase√±a" fill="solid"
              (ionBlur)="marcarTouched('confirmarPassword')" (ngModelChange)="marcarTouched('confirmarPassword')"></ion-input>
            <button type="button" class="btn-ojo" (click)="toggleConfirmPassword()" tabindex="-1">
              <svg *ngIf="!showConfirmPassword" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><ellipse cx="12" cy="12" rx="9" ry="5"/><circle cx="12" cy="12" r="2"/></svg>
              <svg *ngIf="showConfirmPassword" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><ellipse cx="12" cy="12" rx="9" ry="5"/><circle cx="12" cy="12" r="2"/><line x1="2" y1="2" x2="22" y2="22"/></svg>
            </button>
          </div>
          <div class="campo-error" *ngIf="(confirmarPasswordTouched || submitted) && confirmarPasswordError">{{ confirmarPasswordError }}</div>
        </div>
      </div>

      <!-- üîò Bot√≥n Registrar -->
      <div class="login-btn-center">
        <button type="button" (click)="registrarCliente()" class="btn-grande btn-login-nativo" [disabled]="isRegistroDisabled()">
          REGISTRARSE
        </button>
      </div>

      <!-- üîÅ Volver a login -->
      <div class="volver-login">
        ¬øYa tienes cuenta?
        <a routerLink="/login" class="volver-link">Inicia sesi√≥n</a>
      </div>
    </div>
  </div>
</ion-content>
